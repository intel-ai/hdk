if (CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  set_source_files_properties(sqlite3.c PROPERTIES COMPILE_FLAGS "-O0 -Wno-unused-value -Wno-parentheses-equality")
elseif(MSVC)
  set_source_files_properties(sqlite3.c PROPERTIES COMPILE_FLAGS "-O0")
else()
  set_source_files_properties(sqlite3.c PROPERTIES COMPILE_FLAGS "-O0 -Wno-unused-value")
endif()

add_library(sqlite3 STATIC sqlite3.c sqlite3.h)
if(MSVC)
  target_link_libraries(sqlite3 ${CMAKE_DL_LIBS})
else()
target_link_libraries(sqlite3 ${CMAKE_DL_LIBS} pthread)
endif()
set_property(TARGET sqlite3 PROPERTY POSITION_INDEPENDENT_CODE ON)
